# 第10章：条件判断（if-elif-else）

条件判断让程序能够"思考"，根据不同情况做出不同决定。

## if语句

最基本的条件判断。

```python
age = 18

if age >= 18:
    print("你已成年")
    print("可以投票")

print("程序继续")
```

**注意**：
- if后面跟条件，条件为True执行缩进的代码
- 别忘了冒号`:`
- 缩进很重要！

## if-else语句

两个分支：要么这样，要么那样。

```python
age = 16

if age >= 18:
    print("你已成年")
else:
    print("你还未成年")
```

## if-elif-else语句

多个分支。

```python
score = 85

if score >= 90:
    print("优秀")
elif score >= 80:
    print("良好")
elif score >= 70:
    print("中等")
elif score >= 60:
    print("及格")
else:
    print("不及格")
```

**执行顺序**：
1. 从上到下依次检查条件
2. 哪个条件先为True，执行对应代码块
3. 执行完就跳出，不再检查后面的条件
4. 如果所有条件都不满足，执行else

## 条件表达式

### 比较运算符

```python
# 等于
print(5 == 5)   # True
print(5 == 3)   # False

# 不等于
print(5 != 3)   # True

# 大于、小于
print(5 > 3)    # True
print(5 < 3)    # False
print(5 >= 5)   # True
print(5 <= 4)   # False
```

### 逻辑运算符

```python
# and（且）：两个都True才True
age = 20
has_license = True
can_drive = age >= 18 and has_license  # True

# or（或）：有一个True就True
is_weekend = True
is_holiday = False
can_relax = is_weekend or is_holiday  # True

# not（非）：取反
is_raining = False
can_go_out = not is_raining  # True
```

### 组合条件

```python
age = 20
has_ticket = True
has_money = True

# 复杂条件
if age >= 18 and (has_ticket or has_money):
    print("可以进场")
```

### 成员运算符

```python
# in（包含）
fruits = ["apple", "banana", "orange"]
if "apple" in fruits:
    print("有苹果")

# not in（不包含）
if "grape" not in fruits:
    print("没有葡萄")

# 字符串中查找
text = "Hello World"
if "Hello" in text:
    print("找到了")
```

### 身份运算符

```python
# is（是同一个对象）
a = [1, 2, 3]
b = a
c = [1, 2, 3]

print(a is b)  # True（同一个对象）
print(a is c)  # False（不是同一个对象，虽然内容相同）
print(a == c)  # True（内容相同）

# is not
print(a is not c)  # True

# None的判断
x = None
if x is None:
    print("x是None")
```

## 嵌套if语句

if里面还可以有if。

```python
age = 20
has_license = True
has_car = True

if age >= 18:
    print("成年了")
    if has_license:
        print("有驾照")
        if has_car:
            print("可以开车上路")
        else:
            print("没车")
    else:
        print("没驾照")
else:
    print("未成年")
```

## 三元表达式

简化的if-else，一行搞定。

```python
# 传统写法
age = 20
if age >= 18:
    status = "成年"
else:
    status = "未成年"

# 三元表达式
status = "成年" if age >= 18 else "未成年"

# 更多例子
max_num = a if a > b else b
result = "及格" if score >= 60 else "不及格"
```

## 真值测试

Python中，很多值可以直接用在if条件中。

### False的值

```python
# 这些值在if中被视为False
if 0:           # False
    pass
if 0.0:         # False
    pass
if "":          # False（空字符串）
    pass
if []:          # False（空列表）
    pass
if {}:          # False（空字典）
    pass
if None:        # False
    pass
```

### True的值

```python
# 非空值都是True
if 1:           # True
if "hello":     # True
if [1, 2]:      # True
if {"a": 1}:    # True
    pass
```

### 实际应用

```python
# 检查列表是否为空
fruits = []
if fruits:
    print("有水果")
else:
    print("没水果")

# 检查字符串是否为空
name = input("输入姓名：")
if name:
    print(f"你好，{name}")
else:
    print("你没输入名字")

# 检查变量是否为None
result = None
if result is None:
    print("没有结果")
```

## 实战例子

### 例子1：判断奇偶数

```python
num = int(input("输入一个数字："))

if num % 2 == 0:
    print(f"{num}是偶数")
else:
    print(f"{num}是奇数")
```

### 例子2：判断闰年

```python
year = int(input("输入年份："))

# 能被4整除但不能被100整除，或者能被400整除
if (year % 4 == 0 and year % 100 != 0) or (year % 400 == 0):
    print(f"{year}是闰年")
else:
    print(f"{year}不是闰年")
```

### 例子3：BMI计算器

```python
weight = float(input("体重(kg)："))
height = float(input("身高(m)："))

bmi = weight / (height ** 2)
print(f"你的BMI是：{bmi:.1f}")

if bmi < 18.5:
    print("偏瘦")
elif bmi < 24:
    print("正常")
elif bmi < 28:
    print("偏胖")
else:
    print("肥胖")
```

### 例子4：简单登录系统

```python
correct_username = "admin"
correct_password = "123456"

username = input("用户名：")
password = input("密码：")

if username == correct_username and password == correct_password:
    print("登录成功！")
elif username != correct_username:
    print("用户名错误")
else:
    print("密码错误")
```

### 例子5：等级评定

```python
score = float(input("输入分数（0-100）："))

if score < 0 or score > 100:
    print("分数无效")
elif score >= 90:
    grade = "A"
elif score >= 80:
    grade = "B"
elif score >= 70:
    grade = "C"
elif score >= 60:
    grade = "D"
else:
    grade = "F"

if 0 <= score <= 100:
    print(f"等级：{grade}")
```

### 例子6：猜数字游戏

```python
import random

secret_number = random.randint(1, 100)
guess = int(input("猜一个1-100的数字："))

if guess == secret_number:
    print("猜对了！")
elif guess < secret_number:
    print("太小了")
else:
    print("太大了")
```

### 例子7：票价计算

```python
age = int(input("年龄："))

if age < 3:
    price = 0
    print("免费")
elif age < 12:
    price = 10
    print("儿童票：10元")
elif age < 60:
    price = 20
    print("成人票：20元")
else:
    price = 15
    print("老年票：15元")
```

### 例子8：三角形判断

```python
a = float(input("边长a："))
b = float(input("边长b："))
c = float(input("边长c："))

if a + b > c and a + c > b and b + c > a:
    print("可以构成三角形")

    # 判断三角形类型
    if a == b == c:
        print("等边三角形")
    elif a == b or b == c or a == c:
        print("等腰三角形")
    else:
        print("普通三角形")
else:
    print("不能构成三角形")
```

## match-case语句（Python 3.10+）

类似其他语言的switch。

```python
# Python 3.10+
command = input("输入命令（new/open/save/quit）：")

match command:
    case "new":
        print("创建新文件")
    case "open":
        print("打开文件")
    case "save":
        print("保存文件")
    case "quit":
        print("退出程序")
    case _:  # 默认分支
        print("未知命令")
```

## 常见错误

### 错误1：忘记冒号

```python
# 错误
if age >= 18
    print("成年")  # SyntaxError

# 正确
if age >= 18:
    print("成年")
```

### 错误2：缩进错误

```python
# 错误
if age >= 18:
print("成年")  # IndentationError

# 正确
if age >= 18:
    print("成年")
```

### 错误3：用=而不是==

```python
# 错误
if age = 18:  # SyntaxError
    print("18岁")

# 正确
if age == 18:
    print("18岁")
```

### 错误4：浮点数比较

```python
# 不可靠
if 0.1 + 0.2 == 0.3:  # False!
    print("相等")

# 正确
if abs((0.1 + 0.2) - 0.3) < 1e-9:
    print("相等")
```

## 最佳实践

### 避免深层嵌套

```python
# 不好：嵌套太深
if condition1:
    if condition2:
        if condition3:
            do_something()

# 好：提前返回
if not condition1:
    return
if not condition2:
    return
if not condition3:
    return
do_something()
```

### 用in代替多个or

```python
# 不好
if x == 1 or x == 2 or x == 3:
    print("1-3之间")

# 好
if x in [1, 2, 3]:
    print("1-3之间")
```

### 避免重复代码

```python
# 不好
if condition:
    do_common_thing()
    do_a()
else:
    do_common_thing()
    do_b()

# 好
do_common_thing()
if condition:
    do_a()
else:
    do_b()
```

## 练习题

### 练习1：判断质数

判断一个数是否是质数。

### 练习2：成绩等级

输入三科成绩，输出平均分和等级。

### 练习3：星座查询

根据月份和日期，判断星座。

### 练习4：个人所得税

根据收入计算个人所得税（分段计税）。

### 练习5：石头剪刀布

用户输入和电脑随机，判断输赢。

## 下一步

学会了条件判断，下一章我们学习for循环，让代码重复执行！

[上一章：第09章 - 集合 ←](../09-集合/09-集合.md)

[下一章：第11章 - for循环 →](../11-for循环/11-for循环.md)

---

**本章重点**
- ✅ if-elif-else条件判断
- ✅ 比较运算符：==、!=、>、<、>=、<=
- ✅ 逻辑运算符：and、or、not
- ✅ 成员运算符：in、not in
- ✅ 三元表达式：value_if_true if condition else value_if_false
- ✅ 空值被视为False

**记住**
- if后面要加冒号
- 缩进表示代码块
- elif可以有多个
- else是可选的
- 条件从上到下依次检查，满足一个就结束
