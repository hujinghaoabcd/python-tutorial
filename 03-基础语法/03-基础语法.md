# 第03章：基础语法

上一章我们学会了写第一个Python程序，这一章我们要学习Python的基础语法规则。就像学英语要学语法一样，学Python也要掌握这些基本规则。

---

## 变量（Variables）

变量是编程的基础，就像数学里的未知数x、y一样。但Python的变量更灵活，可以装任何东西。

### 什么是变量？

**变量就像是一个盒子，用来装东西。**

```python
# 创建变量，就像给盒子贴标签
name = "小明"  # 这个盒子叫name，里面装着"小明"
age = 18       # 这个盒子叫age，里面装着18
```

**解释**：
- `name`是变量名（盒子的标签）
- `=`是赋值符号（把东西放进盒子）
- `"小明"`是值（盒子里装的东西）

**变量名 = 值**，这就是赋值语句。

---

### 变量命名规则

Python对变量名有严格的要求，必须遵守这些规则，否则会报错。

**必须遵守的规则**（不遵守会报错）：

```python
# 正确的命名
user_name = "张三"  # 可以用字母、数字、下划线
age2 = 20           # 可以包含数字，但不能以数字开头
_private = "私有"    # 可以用下划线开头

# 错误的命名
2age = 20           # 不能以数字开头
user-name = "张三"  # 不能用连字符（-）
for = 10            # 不能用关键字（for是Python的关键字）
```

**命名规则总结**：
- 只能包含字母、数字、下划线（`_`）
- 不能以数字开头
- 不能使用Python的关键字（如`if`、`for`、`class`等）
- 区分大小写（`name`和`Name`是不同的变量）

---

**推荐的命名风格**：

```python
# 好的命名（清晰易懂）
student_count = 30      # 学生数量
total_price = 99.9      # 总价
is_valid = True         # 是否有效

# 不好的命名（看不懂）
sc = 30                 # sc是什么？
tp = 99.9               # tp是什么？
iv = True               # iv是什么？

# 常量用全大写（约定俗成）
PI = 3.14159            # 圆周率
MAX_USERS = 100         # 最大用户数
DEFAULT_COLOR = "red"   # 默认颜色
```

**命名建议**：
- 用英文单词，不要用拼音
- 用下划线连接多个单词（Python风格）
- 变量名小写，常量全大写
- 有意义，一看就知道是什么

---

### 变量赋值

Python的赋值非常灵活，可以一次给多个变量赋值。

```python
# 基本赋值
x = 10
name = "Python"

# 多重赋值（所有变量都是同一个值）
a = b = c = 0  # a、b、c都是0

# 多个变量同时赋值（Python特色！）
x, y, z = 1, 2, 3  # x=1, y=2, z=3
name, age = "小红", 18  # name="小红", age=18

# 交换变量（Python特色！不需要临时变量）
a, b = 10, 20
a, b = b, a  # 交换！现在a=20, b=10
print(a, b)  # 输出：20 10
```

**为什么Python可以这样？**

Python支持"解包赋值"，右边可以是多个值，左边对应多个变量，Python会自动匹配。

---

### 变量的动态类型

Python的变量可以随时改变类型，这和其他语言不同。

```python
x = 10  # x是整数
print(type(x))  # <class 'int'>

x = "Hello"  # 现在x是字符串了
print(type(x))  # <class 'str'>

x = [1, 2, 3]  # 现在x是列表了
print(type(x))  # <class 'list'>
```

**这有什么好处？**
- 灵活，不需要提前声明类型
- 方便，想改就改

**这有什么坏处？**
- 容易出错，类型不匹配时可能报错
- 不够明确，看代码时不知道变量是什么类型

**建议**：虽然Python允许，但最好让变量保持同一类型，这样代码更清晰。

---

## 数据类型概览

Python有几种基本数据类型，就像数学里有整数、小数、分数一样。

### 1. 数字类型

```python
# 整数（int）- 没有小数点的数
age = 18
year = 2024
count = -5  # 可以是负数

# 浮点数（float）- 有小数点的数
price = 99.9
pi = 3.14159
temperature = -10.5  # 可以是负数

# 布尔值（bool）- 只有两个值：True和False
is_student = True
is_adult = False
```

**注意**：
- 整数和浮点数可以互相转换
- 布尔值实际上就是整数：`True = 1`，`False = 0`

---

### 2. 字符串（str）

字符串就是文本，用引号包起来。

```python
name = "小明"           # 双引号
message = '你好'        # 单引号（和双引号一样）
multi_line = """这是
多行
字符串"""              # 三个引号可以写多行
```

**字符串的特点**：
- 可以用单引号或双引号（建议统一用一种）
- 三个引号可以写多行
- 字符串是不可变的（不能直接修改）

---

### 3. 列表（list）

列表就像一排盒子，可以装很多东西。

```python
fruits = ["苹果", "香蕉", "橙子"]  # 字符串列表
numbers = [1, 2, 3, 4, 5]          # 数字列表
mixed = [1, "hello", 3.14, True]  # 可以混合类型
```

**列表的特点**：
- 用方括号`[]`表示
- 可以装任何类型的数据
- 可以修改（增删改查）

---

### 4. 元组（tuple）

元组就像列表，但不能修改。

```python
point = (10, 20)  # 坐标点
colors = ("red", "green", "blue")  # 颜色元组
```

**元组的特点**：
- 用圆括号`()`表示
- 不能修改（不可变）
- 通常用来表示固定的数据

---

### 5. 字典（dict）

字典就像查字典，通过"键"找"值"。

```python
person = {
    "name": "张三",
    "age": 25,
    "city": "北京"
}
```

**字典的特点**：
- 用花括号`{}`表示
- 键值对结构：`"键": "值"`
- 通过键快速查找值

---

### 6. 集合（set）

集合就像数学里的集合，自动去重。

```python
unique_numbers = {1, 2, 3, 4, 5}
```

**集合的特点**：
- 用花括号`{}`表示（和字典不同，没有冒号）
- 自动去重，不会有重复元素
- 可以做集合运算（交集、并集等）

---

### 查看类型

想知道一个变量是什么类型，用`type()`函数。

```python
x = 10
print(type(x))  # <class 'int'>

y = "Hello"
print(type(y))  # <class 'str'>

z = [1, 2, 3]
print(type(z))  # <class 'list'>
```

**实际应用**：
```python
# 检查类型，避免错误
age = input("年龄：")
if age.isdigit():  # 检查是否是数字字符串
    age = int(age)
    print(f"你的年龄是{age}岁")
else:
    print("请输入数字！")
```

---

## 类型转换

有时候我们需要把一种类型转换成另一种类型，比如把字符串"18"转换成整数18。

### 转换成整数

```python
# 字符串转整数
age = int("18")  # 18
print(type(age))  # <class 'int'>

# 浮点数转整数（会截断小数部分，不是四舍五入！）
num = int(3.9)  # 3，不是4！
num2 = int(3.1)  # 也是3

# 布尔值转整数
print(int(True))   # 1
print(int(False))  # 0
```

**注意**：`int()`会直接截断小数，不是四舍五入。要四舍五入用`round()`。

---

### 转换成浮点数

```python
# 字符串转浮点数
price = float("99.9")  # 99.9
print(type(price))  # <class 'float'>

# 整数转浮点数
num = float(10)  # 10.0
```

**实际应用**：
```python
# 计算时可能需要浮点数
price = float(input("价格："))  # 输入"99.9"，转换成99.9
quantity = int(input("数量："))  # 输入"3"，转换成3
total = price * quantity
print(f"总价：{total}")
```

---

### 转换成字符串

任何东西都能转成字符串。

```python
# 数字转字符串
age_str = str(18)  # "18"
price_str = str(99.9)  # "99.9"

# 任何东西都能转成字符串
list_str = str([1, 2, 3])  # "[1, 2, 3]"
bool_str = str(True)  # "True"
```

**实际应用**：
```python
# 拼接字符串时需要转换
age = 18
message = "我今年" + str(age) + "岁"  # 必须转成字符串才能拼接
# 或者用f-string更方便
message = f"我今年{age}岁"
```

---

### 转换成布尔值

在Python中，很多东西都可以转成布尔值，有"真值"和"假值"的概念。

```python
# 数字转布尔：0是False，其他都是True
print(bool(0))    # False
print(bool(1))    # True
print(bool(-1))   # True（负数也是True）
print(bool(100))  # True

# 字符串转布尔：空字符串是False，其他是True
print(bool(""))       # False
print(bool("Hello"))  # True
print(bool("0"))      # True（注意！"0"是字符串，不是数字0）

# 列表转布尔：空列表是False，其他是True
print(bool([]))       # False
print(bool([1, 2]))   # True

# None是False
print(bool(None))     # False
```

**实际应用**：
```python
# 检查变量是否有值
name = input("姓名：")
if name:  # 如果name不是空字符串，就是True
    print(f"你好，{name}！")
else:
    print("请输入姓名！")
```

---

## 运算符

运算符就是用来做运算的符号，比如`+`、`-`、`*`、`/`等。

### 算术运算符

```python
# 加减乘除
print(10 + 3)   # 13
print(10 - 3)   # 7
print(10 * 3)   # 30
print(10 / 3)   # 3.3333...（结果是浮点数）

# 整除（去掉小数部分）
print(10 // 3)  # 3（不是3.333）

# 取余（求余数）
print(10 % 3)   # 1（10除以3余1）

# 幂运算（次方）
print(2 ** 3)   # 8 (2的3次方)
print(10 ** 2)  # 100 (10的2次方)
```

**实际应用**：
```python
# 判断奇偶数
num = 10
if num % 2 == 0:
    print("偶数")
else:
    print("奇数")

# 计算幂
result = 2 ** 10  # 2的10次方 = 1024
```

---

### 比较运算符

用来比较两个值的大小或是否相等。

```python
# 等于（注意是两个等号==，不是=）
print(5 == 5)   # True
print(5 == 3)   # False

# 不等于
print(5 != 3)   # True
print(5 != 5)   # False

# 大于、小于
print(5 > 3)    # True
print(5 < 3)    # False
print(5 >= 5)   # True（大于等于）
print(5 <= 4)   # False（小于等于）
```

**注意**：`==`是比较，`=`是赋值，不要搞混！

**实际应用**：
```python
# 判断年龄
age = 20
if age >= 18:
    print("你成年了")
else:
    print("你还未成年")
```

---

### 逻辑运算符

用来组合多个条件。

```python
# and（且）：两个都True才是True
print(True and True)    # True
print(True and False)   # False
print(False and False)  # False

# or（或）：有一个True就是True
print(True or False)    # True
print(False or False)   # False
print(True or True)     # True

# not（非）：取反
print(not True)         # False
print(not False)        # True

# 实际例子
age = 20
has_id = True
can_enter = age >= 18 and has_id  # 两个条件都满足才能进入
print(can_enter)  # True
```

**实际应用**：
```python
# 判断成绩等级
score = 85
if score >= 90:
    print("优秀")
elif score >= 80 and score < 90:
    print("良好")
elif score >= 60 and score < 80:
    print("及格")
else:
    print("不及格")
```

---

### 赋值运算符

用来简化赋值操作。

```python
# 基本赋值
x = 10

# 复合赋值（简化写法）
x += 5   # 相当于 x = x + 5，现在x是15
x -= 3   # 相当于 x = x - 3，现在x是12
x *= 2   # 相当于 x = x * 2，现在x是24
x /= 4   # 相当于 x = x / 4，现在x是6.0
x //= 2  # 相当于 x = x // 2，现在x是3.0
x %= 2   # 相当于 x = x % 2，现在x是1.0
```

**实际应用**：
```python
# 计数器
count = 0
count += 1  # 计数加1
count += 1  # 再加1
print(count)  # 2

# 累加
total = 0
total += 10
total += 20
total += 30
print(total)  # 60
```

---

## 缩进（超级重要！）

Python用缩进来表示代码块，这是Python最独特的特性！其他语言用`{}`，Python用缩进。

### 为什么用缩进？

**缩进让代码更清晰、更易读。**

```python
# 这是第一层
if True:
    # 这是第二层（缩进4个空格或1个Tab）
    print("Hello")
    if True:
        # 这是第三层
        print("World")
```

**解释**：
- `if True:`后面的代码要缩进
- 缩进的代码属于`if`块
- 不缩进的代码不属于`if`块

---

### 正确的缩进

```python
# 例子1：条件判断
age = 18
if age >= 18:
    print("你成年了")  # 这行属于if块
    print("可以投票")  # 这行也属于if块
print("程序结束")  # 这行不属于if块，总会执行

# 例子2：循环
for i in range(3):
    print(f"第{i}次")  # 这行属于循环块
    print("循环中")     # 这行也属于循环块
print("循环结束")  # 这行不属于循环块
```

---

### 错误的缩进

```python
# 错误1：缩进不一致
if True:
    print("Hello")
        print("World")  # IndentationError! 缩进不一致

# 错误2：不该缩进的地方缩进了
print("A")
    print("B")  # IndentationError! 这行不应该缩进

# 错误3：该缩进的地方没缩进
if True:
print("Hello")  # IndentationError: expected an indented block
```

---

### 缩进规范

- **推荐用4个空格**（PEP 8标准）
- 不要混用空格和Tab（会出错）
- 大多数编辑器按Tab键会自动转成4个空格
- 同一层代码的缩进要一致

**为什么用4个空格？**
- 2个空格太挤，8个空格太宽
- 4个空格正好，既清晰又不占太多空间
- 这是Python社区的约定

---

## 代码块

缩进决定了哪些代码属于同一个块。

```python
# 例子1：条件判断
age = 18
if age >= 18:
    print("你成年了")  # 这行属于if块
    print("可以投票")  # 这行也属于if块
print("程序结束")  # 这行不属于if块，总会执行

# 例子2：循环
for i in range(3):
    print(f"第{i}次")  # 这行属于循环块
    print("循环中")     # 这行也属于循环块
print("循环结束")  # 这行不属于循环块
```

**理解代码块**：
- 相同缩进的代码属于同一个块
- 缩进越多，层级越深
- 代码块可以嵌套

---

## 标识符和关键字

### 关键字（不能用作变量名）

关键字是Python保留的单词，有特殊含义，不能用作变量名。

```python
# 查看所有关键字
import keyword
print(keyword.kwlist)

# 常见关键字：
# if, else, elif, for, while, def, class, import, 
# True, False, None, and, or, not, in, is, return等
```

---

### 不能用关键字做变量名

```python
# 错误：关键字不能做变量名
if = 10       # SyntaxError: invalid syntax
for = "hello" # SyntaxError: invalid syntax
class = "A"   # SyntaxError: invalid syntax

# 正确：可以加下划线或改名字
if_condition = 10
for_loop = "hello"
class_name = "A"
```

**如果不知道是不是关键字怎么办？**
- 用编辑器，关键字会高亮显示
- 或者运行代码，如果是关键字会报错

---

## 多行语句

有时候一行代码太长，可以分成多行写。

### 用反斜杠续行

```python
# 一行太长，可以用\分成多行
total = 1 + 2 + 3 + 4 + \
        5 + 6 + 7 + 8

message = "这是一段很长很长很长" + \
          "很长很长的文字"
```

**注意**：反斜杠后面不能有任何字符（包括空格），必须直接换行。

---

### 括号内自动续行（推荐）

```python
# 在括号、方括号、花括号内可以直接换行
total = (1 + 2 + 3 + 4 +
         5 + 6 + 7 + 8)

fruits = ["苹果", "香蕉",
          "橙子", "葡萄"]

person = {
    "name": "张三",
    "age": 25,
    "city": "北京"
}
```

**推荐用括号方式**，因为：
- 不需要反斜杠
- 更清晰
- 不容易出错

---

## 同一行写多条语句

虽然可以，但不推荐。

```python
# 用分号隔开（但不推荐，影响可读性）
x = 10; y = 20; z = 30
print(x); print(y); print(z)

# 更好的写法：分开写
x = 10
y = 20
z = 30
print(x)
print(y)
print(z)
```

**建议**：一行一条语句，这样代码更清晰、更易读。

---

## 实战例子

光说不练假把式，让我们看看这些语法在实际中的应用。

---

### 例子1：变量交换技巧

Python交换变量非常优雅，不需要临时变量。

```python
# 普通语言需要临时变量
a = 10
b = 20
temp = a
a = b
b = temp

# Python的优雅写法
a, b = 10, 20
a, b = b, a  # 一行搞定！
print(a, b)  # 20 10
```

**为什么可以这样？**
Python先计算右边`(b, a)`，得到`(20, 10)`，然后赋值给左边`(a, b)`。

---

### 例子2：输入验证

处理用户输入时，需要验证类型。

```python
age_str = input("请输入年龄：")

# 检查是否是数字
if age_str.isdigit():
    age = int(age_str)
    print(f"你的年龄是{age}岁")
else:
    print("请输入有效的数字！")
```

**更好的写法**：
```python
# 用try-except处理错误（后面会学）
try:
    age = int(input("请输入年龄："))
    print(f"你的年龄是{age}岁")
except ValueError:
    print("请输入有效的数字！")
```

---

### 例子3：批量赋值

Python可以一次给多个变量赋值，非常方便。

```python
# 解包赋值
person = ("张三", 25, "北京")
name, age, city = person
print(f"{name}，{age}岁，来自{city}")

# 忽略某些值（用下划线）
person = ("李四", 30, "上海", "程序员")
name, age, _, job = person  # 用_忽略第三个值
print(f"{name}，{age}岁，{job}")

# 收集剩余的值
person = ("王五", 28, "广州", "设计师", "本科")
name, age, *others = person  # *others收集剩余的值
print(name, age)  # 王五 28
print(others)  # ['广州', '设计师', '本科']
```

---

## 常见错误

新手写代码经常会遇到这些错误，提前知道可以少走弯路。

---

### 错误1：变量名拼写错误

```python
user_name = "张三"
print(username)  # NameError: name 'username' is not defined
```

**原因**：`user_name`和`username`是不同的变量。

**解决**：检查变量名拼写，确保一致。

---

### 错误2：缩进错误

```python
if True:
print("Hello")  # IndentationError: expected an indented block
```

**原因**：`if`后面的代码必须缩进。

**解决**：在`if`、`for`、`def`等后面，代码要缩进。

---

### 错误3：类型不匹配

```python
age = input("年龄：")  # "18"，字符串
next_year = age + 1  # TypeError: 不能把字符串和数字相加

# 正确写法
age = int(input("年龄："))
next_year = age + 1
```

**原因**：`input()`返回字符串，不能直接和数字运算。

**解决**：需要数字时，用`int()`或`float()`转换。

---

### 错误4：用`=`比较

```python
if age = 18:  # SyntaxError: 不能这样写
    print("成年")

# 正确写法
if age == 18:  # 用两个等号
    print("成年")
```

**原因**：`=`是赋值，`==`是比较。

**解决**：比较时用`==`，不要用`=`。

---

## 练习题

光看不练假把式，动手写代码才能真正学会！

---

### 练习1：变量交换

不使用临时变量，交换两个变量的值。

```python
# 不使用临时变量，交换两个变量的值
a = 100
b = 200
# 你的代码
print(a, b)  # 应该输出：200 100
```

**提示**：用Python的多重赋值。

---

### 练习2：温度转换器

输入华氏度，转换成摄氏度。

```python
# 输入华氏度，转换成摄氏度
# 公式：C = (F - 32) × 5/9
fahrenheit = float(input("请输入华氏度："))
# 你的代码
```

---

### 练习3：计算平均分

输入三科成绩，计算平均分。

```python
# 输入三科成绩，计算平均分
chinese = float(input("语文："))
math = float(input("数学："))
english = float(input("英语："))
# 计算平均分
average = # 你的代码
print(f"平均分：{average:.2f}")
```

---

### 练习4：圆的周长和面积

输入半径，计算周长和面积。

```python
# 输入半径，计算周长和面积
# 周长 = 2 × π × r
# 面积 = π × r²
import math
radius = float(input("半径："))
# 你的代码
circumference = # 周长
area = # 面积
print(f"周长：{circumference:.2f}")
print(f"面积：{area:.2f}")
```

---

## 下一步

学会了基础语法，你已经掌握了Python的核心规则！下一章我们将深入学习数字类型和各种运算，包括：
- 整数的各种操作
- 浮点数的精度问题
- 数学运算的细节
- 更多实用的技巧

准备好了吗？让我们继续Python之旅！

[上一章：第02章 - 第一个Python程序 ←](../02-第一个Python程序/02-第一个Python程序.md)

[下一章：第04章 - 数字类型和运算 →](../04-数字类型和运算/04-数字类型和运算.md)

---

## 本章重点总结

学完这一章，你应该掌握：

- **变量的定义和命名规则**：如何创建变量，如何命名
- **Python的主要数据类型**：数字、字符串、列表、元组、字典、集合
- **类型转换**：如何在不同类型之间转换
- **各种运算符**：算术、比较、逻辑、赋值运算符
- **缩进的重要性**：Python用缩进表示代码块，必须规范
- **关键字不能用作变量名**：Python保留的单词不能用作变量名
- **多行语句和代码风格**：如何写长代码，如何写清晰的代码

**记住**：
- Python用缩进表示代码块，必须规范，推荐4个空格
- 变量名要有意义，使用小写加下划线（Python风格）
- `input()`返回字符串，需要数字时要转换类型
- 关键字不能做变量名
- `==`是比较，`=`是赋值，不要搞混
- 一行一条语句，代码更清晰

**你已经掌握了Python的基础语法！** 这是非常重要的一步，后续的学习都建立在这些基础上。继续加油！
